{% extends 'base.html.twig' %}

{% block title %}Profil de {{ user.nom }}{% endblock %}

{% block body %}
    <div class="form-container">
        <div class="container">
            <h1>🎯 Profil de {{ user.nom }}</h1>
            <p class="subtitle">Ici c'est ta safe zone, ce coin n'est que à toi.<br>(Et aux adminastreurs un petit peu trop curieux 👀)</p>

            <div class="account-actions">
                <!-- Formulaire de déconnexion -->
                <form action="{{ path('app_logout') }}" method="POST">
                    <button type="submit" class="btn btn-primary">Déconnexion</button>
                </form>

                <!-- Formulaire de suppression -->
                <form action="{{ path('app_delete_account', {'id': user.id}) }}" method="POST" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer votre compte ? Cette action est irréversible.');">
                    <button type="submit" class="btn btn-secondary">Supprimer le compte</button>
                </form>
            </div>


            <!-- Modification -->
            <h2>🛠️ Modifier mes infos</h2>
            <form action="{{ path('app_update_account', {'id': user.id}) }}" method="POST">
                <label for="nom">Nom :</label>
                <input type="text" name="nom" id="nom" value="{{ user.nom }}" required>

                <label for="email">Email :</label>
                <input type="email" name="email" id="email" value="{{ user.email }}" required>

                <label for="new_password">Nouveau mot de passe :</label>
                <input type="password" name="new_password" id="new_password" placeholder="Laisse vide si inchangé">

                <label for="current_password">Mot de passe actuel <span style="color:#ccc;">(obligatoire seulement si changement de mot de passe)</span> :</label>
                <input type="password" name="current_password" id="current_password">

                <div class="actions">
                    <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
                </div>
            </form>
        </div>
    </div>

{% endblock %}
