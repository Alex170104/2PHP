{% extends 'base.html.twig' %}

{% block title %}Profil de {{ user.nom }}{% endblock %}

{% block stylesheets %}
    <style>
        body {
            background: linear-gradient(135deg, #1c1c1c, #2b2b2b);
            color: #f0f0f0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 4rem auto;
            padding: 2rem;
            background-color: #2f2f2f;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            animation: fadeInUp 1s ease-out;
        }

        h1, h2 {
            text-align: center;
            color: #f9d423;
            text-shadow: 1px 1px 8px #000;
        }

        p.subtitle {
            text-align: center;
            color: #ccc;
            font-style: italic;
            margin-bottom: 2rem;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 1.2rem;
        }

        label {
            font-weight: bold;
            color: #ffb347;
        }

        input {
            padding: 0.7rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            background-color: #444;
            color: #fff;
        }

        input:focus {
            outline: 2px solid #f9d423;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff4e50, #f9d423);
            color: #1f1f1f;
        }
        .btn-secondary {
            background: linear-gradient(135deg, #f9d423, #ff4e50);
            color: #1f1f1f;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e53935, #d32f2f);
            color: white;
        }

        .btn-danger:hover {
            background: #b71c1c;
        }

        .actions {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .account-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 1.5rem;
        }


        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
{% endblock %}

{% block body %}
    <div class="container">
        <h1>üéØ Profil de {{ user.nom }}</h1>
        <p class="subtitle">Ici c'est ta safe zone, ce coin n'est que √† toi.<br>(Et aux adminastreurs un petit peu trop curieux üëÄ)</p>

        <div class="account-actions">
            <!-- Formulaire de d√©connexion -->
            <form action="{{ path('app_logout') }}" method="POST">
                <button type="submit" class="btn btn-primary">D√©connexion</button>
            </form>

            <!-- Formulaire de suppression -->
            <form action="{{ path('app_delete_account', {'id': user.id}) }}" method="POST" onsubmit="return confirm('√ätes-vous s√ªr de vouloir supprimer votre compte ? Cette action est irr√©versible.');">
                <button type="submit" class="btn btn-primary btn-secondary">Supprimer le compte</button>
            </form>
        </div>


        <!-- Modification -->
        <h2>üõ†Ô∏è Modifier mes infos</h2>
        <form action="{{ path('app_update_account', {'id': user.id}) }}" method="POST">
            <label for="nom">Nom :</label>
            <input type="text" name="nom" id="nom" value="{{ user.nom }}" required>

            <label for="email">Email :</label>
            <input type="email" name="email" id="email" value="{{ user.email }}" required>

            <label for="new_password">Nouveau mot de passe :</label>
            <input type="password" name="new_password" id="new_password" placeholder="Laisse vide si inchang√©">

            <label for="current_password">Mot de passe actuel <span style="color:#ccc;">(obligatoire seulement si changement de mot de passe)</span> :</label>
            <input type="password" name="current_password" id="current_password">

            <div class="actions">
                <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
            </div>
        </form>
    </div>
{% endblock %}
